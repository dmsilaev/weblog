.box.wide.admin_stories_index
  .legend
    = t('.title')
  %table.data.zebra{ cellspacing: "0", width: "100%" }
    %tr
      %th{ width: "8%" }
        =simple_form_for(@search, url: admin_stories_path, method: :get ) do |f|
          = f.input :state_eq, label: false, as: :select,  input_html: { onchange: "this.form.submit()" }, collection: {t('.table.state.all') => nil, t('.table.state.new') => 'new', t('.table.state.published') => 'published'}, required: false, selected: @search_params[:state_eq]
          %noscript
            =f.submit
      %th{ width: "28%" }=t('.table.title')
      %th{ width: "25%" }=t('.table.tags')
      %th{ width: "23%" }=t('.table.creator')
      %th{ width: "16%"}=t('table.actions')
    - @stories.each do |story|
      %tr
        %td=story.published? ? t('.table.actions.published') : (link_to t('.table.actions.publish'), api_admin_story_path(story, state_event: :publish), remote: true, method: 'put', class: 'change_state')
        %td=link_to story.title, story.url
        %td
          - story.tag_list.each do |tag|
            = link_to tag, stories_by_tag_path(tag), q: tag, class: "tag tag_#{tag}"
        %td=story.user.login
        %td
          = link_to t('.table.actions.show'), admin_story_path(story, q: { title_cont: "asssa" })
          = link_to t('.table.actions.edit'), edit_admin_story_path(story)
          = link_to t('.table.actions.destroy'), admin_story_path(story), method: :delete